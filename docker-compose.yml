services:
  geopagos.gateway.app:
    image: ${DOCKER_REGISTRY-}geopagosgatewayapp
    container_name: services-gateway
    hostname: services-gateway
    build:
      context: .
      dockerfile: GeoPagos.Gateway.App/Dockerfile
    networks:
      - geopagos-network

  geopagos.authorization.api:
    image: ${DOCKER_REGISTRY-}geopagosauthorizationapi
    container_name: services-authorization
    hostname: services-authorization
    build:
      context: .
      dockerfile: GeoPagos.Authorization.Api/Dockerfile
    networks:
      - geopagos-network


  geopagos.paymentprocessor.api:
    image: ${DOCKER_REGISTRY-}geopagospaymentprocessorapi
    container_name: services-payment-processor  
    hostname: services-payment-processor
    build:
      context: .
      dockerfile: GeoPagos.PaymentProcessor.Api/Dockerfile
    networks:
      - geopagos-network

  consul:
    image: consul:1.15.0  # Usar una versión específica
    container_name: services-consul 
    hostname: services-consul
    ports:
      - "8500:8500"  
    volumes:
      - consul-data:/consul/data
    networks:
      - geopagos-network

  rabbitmq:
    image: rabbitmq:3-management
    container_name: rabbitmq
    ports:
      - "5672:5672" # Puerto para comunicación con aplicaciones (AMQP)
      - "15672:15672" # Puerto para la interfaz web de administración
    environment:
      RABBITMQ_DEFAULT_USER: user
      RABBITMQ_DEFAULT_PASS: password
    networks:
      - geopagos-network

  zipkin:
    image: openzipkin/zipkin
    container_name: zipkin
    ports:
      - "9411:9411" # Puerto para la interfaz web de Zipkin
    depends_on:
      - rabbitmq
    networks:
      - geopagos-network 



volumes:
  consul-data:

networks:
  geopagos-network:  